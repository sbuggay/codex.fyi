<html>

<head>
	<style>
		#wrap {
			width: 50%;
			margin: 16px auto;
		}

		#hash {
			width: 100%;
		}
		
		#textarea {
			width: 100%;
			height: 600px;
			margin-top: 16px;
		}
		
		#submit {
			margin-top: 16px;
			float: right;
		}
	</style>
</head>

<body>
	<div id="wrap">
		<div>
		<input placeholder="parent_hash" id="hash"></input>
		<textarea id="textarea"></textarea>
		</div>
		<button id="submit">submit</button>
	</div>
	<script>
		var submit = document.getElementById("submit");
		submit.addEventListener("click", function () {
			const req = new XMLHttpRequest();
			req.open('POST', "/");
			req.setRequestHeader("Content-Type", "application/json");
			req.onreadystatechange = function () {
				if (this.readyState === 4) {
					req.onreadystatechange = null;
					if (this.status === 200) {
						var response = JSON.parse(req.response);
						window.location = "/" + response.id;
					}
				}
			};
			req.send(JSON.stringify({
				body: document.getElementById("textarea").value
			}));
		});
	</script>
</body>

</html>